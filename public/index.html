<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR Code Generator</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp,container-queries"></script>
    <style>
      @media print {
        body * {
          display: none;
        }

        #printArea,
        #printArea * {
          display: block;
        }

        #printArea {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
        }
      }
    </style>
    <script>
      tailwind.config = {
        darkMode: "class",
      };
    </script>
  </head>

  <body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-200">
    <nav class="bg-white border-gray-200 dark:bg-gray-900">
      <div
        class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
      >
        <a href="" class="flex items-center space-x-3 rtl:space-x-reverse pb-4">
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/463px-UPI-Logo-vector.svg.png?20200901100648"
            class="h-5"
            alt="Upi Logo"
          />
          <span
            class="self-center text-1xl font-semibold whitespace-nowrap dark:text-white"
          >
            UPI QR Code Generator</span
          >
        </a>
        <button
          data-collapse-toggle="navbar-cta"
          type="button"
          class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
          aria-controls="navbar-cta"
          aria-expanded="false"
        >
          <span class="sr-only">Open main menu</span>
          <svg
            class="w-5 h-5"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 17 14"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M1 1h15M1 7h15M1 13h15"
            />
          </svg>
        </button>
        <div
          class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse gap-3"
        >
          <a
            href="https://github.com/devagn611"
            target="_blank"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
          >
            Github &rarr;
          </a>
          <button
            id="themeToggle"
            class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
              />
            </svg>
          </button>
        </div>
        <div
          class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1"
          id="navbar-cta"
        >
          <ul
            class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700"
          >
            <li>
              <a
                href="/qrgen"
                class="block py-2 px-3 md:p-0 text-white bg-blue-700 rounded md:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500"
         
                >Home</a
              >
            </li>
            <li>
              <a
                href="/api"
                class="block py-2 px-3 md:p-0 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
                >API</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block py-2 px-3 md:p-0 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
                >About</a
              >
            </li>
            <!-- <li>
            <a href="#"
              class="block py-2 px-3 md:p-0 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Contact</a>
          </li> -->
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
      <div class="flex justify-between items-center mb-8">
        <!-- <h1 class="text-3xl font-bold text-gray-800 dark:text-white">
          QR Code Generator
        </h1> -->
        <!-- <button
          id="themeToggle"
          class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
            />
          </svg>
        </button> -->
      </div>

      <div class="flex flex-col md:flex-row gap-8">
        <!-- Input Area -->
        <div class="w-full md:w-1/2">
          <form
            id="qrForm"
            class="bg-white dark:bg-gray-800 shadow-md rounded px-8 pt-6 pb-8 mb-4"
          >
            <div class="mb-4">
              <label
                for="dataType"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300"
                >Select Data Type:</label
              >
              <select
                id="dataType"
                name="dataType"
                onchange="showInputFields()"
                class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
              >
                <option value="">Choose Data Type</option>
                <option value="upiid">UPI ID</option>
                <option value="upi">UPI Payment</option>
              </select>
            </div>

            <div id="upiidGroup" class="space-y-4" style="display: none">
              <div>
                <label
                  for="upiName"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300"
                  >Name</label
                >
                <input
                  type="text"
                  id="upiName"
                  name="upiName"
                  placeholder="Enter Name"
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                />
              </div>
              <div>
                <label
                  for="upiID"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300"
                  >UPI ID</label
                >
                <input
                  type="text"
                  id="upiID"
                  name="upiID"
                  placeholder="Enter UPI ID"
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                />
              </div>
            </div>

            <div id="upiGroup" class="space-y-4" style="display: none">
              <div>
                <label
                  for="accountNo"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300"
                  >Account Number</label
                >
                <input
                  type="text"
                  id="accountNo"
                  name="accountNo"
                  placeholder="Enter Account Number"
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                />
              </div>
              <div>
                <label
                  for="ifscCode"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300"
                  >IFSC Code</label
                >
                <input
                  type="text"
                  id="ifscCode"
                  name="ifscCode"
                  placeholder="Enter IFSC Code"
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                />
              </div>
              <div>
                <label
                  for="personName"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300"
                  >Person's Name</label
                >
                <input
                  type="text"
                  id="personName"
                  name="personName"
                  placeholder="Enter Person's Name"
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                />
              </div>
            </div>

            <button
              type="submit"
              class="mt-6 w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"
            >
              Generate QR Code
            </button>
          </form>
        </div>

        <!-- Output Area -->
        <div class="w-full md:w-1/2" id="qrcode-output">
          <div
            class="bg-white dark:bg-gray-800 shadow-md rounded px-8 pt-6 pb-8 mb-4"
          >
            <div id="printArea" class="text-center" style="display: none">
              <div
                class="show-name text-xl font-semibold mb-4 text-gray-800 dark:text-white"
              ></div>
              <img id="qrCode" src="" alt="QR Code" class="mx-auto" />
            </div>
            <div class="mt-6 space-y-4">
              <a
                href="#"
                id="upilinkapp"
                target="_blank"
                class="block w-full text-center bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800"
                style="display: none"
                >Open in UPI App</a
              >
              <button
                id="printQRBtn"
                onclick="printQRCode()"
                class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800"
                style="display: none"
              >
                Print QR
              </button>
              <a
                href="#"
                id="downloadQRBtn"
                class="block w-full text-center bg-purple-500 text-white py-2 px-4 rounded-md hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800"
                style="display: none"
                >Download QR</a
              >

              <button
                id="shareQRBtn"
                class="w-full bg-teal-500 text-white py-2 px-4 rounded-md hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-offset-gray-800"
                style="display: none"
              >
                Share QR
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex items-center justify-center ">
      <div
        class="flex items-center p-6 bg-white/10 backdrop-blur-md rounded-lg shadow-lg border border-white/30 max-w-md mx-4"
      >
 
        <img
        loading="lazy"
          src="https://avatars.githubusercontent.com/u/99108074?v=4"
          alt="Profile Picture"
          class="w-20 h-20 rounded-full object-cover"
        />
        <div class="w-px h-16 bg-white/50 mx-6 dark:bg-black/50"></div>
        <div class="text-black dark:text-white">
          <h1>Build & Design</h1>
          <h2 class="text-xl font-semibold mb-2">Maniya Devagn</h2>
          <p class="text-sm mb-2">Email: devagnmaniya611@gmail.com</p>
          <!-- <a
            href="https://example.com"
            target="_blank"
            class="text-blue-400 hover:underline"
            >Website</a
          > -->
        </div>
      </div>
    </div>

    <script>
      // Theme toggle functionality
      const themeToggleBtn = document.getElementById("themeToggle");
      const html = document.documentElement;

      themeToggleBtn.addEventListener("click", function () {
        html.classList.toggle("dark");
        localStorage.setItem(
          "theme",
          html.classList.contains("dark") ? "dark" : "light"
        );
      });

      // Check for saved theme preference or prefer-color-scheme
      if (
        localStorage.getItem("theme") === "dark" ||
        (!localStorage.getItem("theme") &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        html.classList.add("dark");
      } else {
        html.classList.remove("dark");
      }

      function showInputFields() {
        const dataType = document.getElementById("dataType").value;
        document.getElementById("upiidGroup").style.display =
          dataType === "upiid" ? "block" : "none";
        document.getElementById("upiGroup").style.display =
          dataType === "upi" ? "block" : "none";
      }

      document
        .getElementById("qrForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          generateQRCode();
        });

      function generateQRCode() {
        const dataType = document.getElementById("dataType").value;
        let apiUrl;
        let name;

        if (dataType === "upiid") {
          name = document.getElementById("upiName").value;
          const upiID = document.getElementById("upiID").value;
          apiUrl = `/api/qrgen?upiid=${encodeURIComponent(
            upiID
          )}&name=${encodeURIComponent(name)}`;
        } else if (dataType === "upi") {
          const accountNo = document.getElementById("accountNo").value;
          const ifscCode = document.getElementById("ifscCode").value;
          name = document.getElementById("personName").value;
          apiUrl = `/api/qrgen?ifsccode=${encodeURIComponent(
            ifscCode
          )}&accountnum=${encodeURIComponent(
            accountNo
          )}&name=${encodeURIComponent(name)}`;
        } else {
          alert("Please select a data type");
          return;
        }

        fetch(apiUrl)
          .then((response) => response.blob())
          .then((blob) => {
            const qrCodeImg = document.getElementById("qrCode");
            qrCodeImg.src = URL.createObjectURL(blob);
            document.getElementById("printArea").style.display = "block";

            const showNameDiv = document.querySelector(".show-name");
            showNameDiv.textContent = `Name: ${name}`;

            document.getElementById("upilinkapp").href = apiUrl.replace(
              "/api/qrgen",
              "upi://pay"
            );
            document.getElementById("upilinkapp").style.display = "block";
            document.getElementById("printQRBtn").style.display = "block";

            const downloadBtn = document.getElementById("downloadQRBtn");
            downloadBtn.href = URL.createObjectURL(blob);
            downloadBtn.download = "qrcode.png";
            downloadBtn.style.display = "block";

            const shareBtn = document.getElementById("shareQRBtn");
            shareBtn.onclick = function () {
              const shareData = {
                title: "QR Code",
                text: `Scan this QR code for ${name}`,
                url: `http://localhost:3000${apiUrl}`,
              };

              if (navigator.share) {
                navigator
                  .share(shareData)
                  .catch((error) => console.error("Error sharing:", error));
              } else {
                alert("Sharing is not supported in this browser.");
              }
            };
          })
          .catch((error) => {
            console.error("Error generating QR code:", error);
            alert("Error generating QR code. Please try again.");
          });
      }

      function printQRCode() {
        const printArea = document.getElementById("qrcode-output").innerHTML;
        const originalContent = document.body.innerHTML;
        const darkClass = document.documentElement.classList.contains("dark")
          ? "dark"
          : "";

        const printWindow = window.open("", "_blank");
        printWindow.document.write(`
    <html lang="en">
      <head>
        <title>Print QR Code</title>
        <style>
          @media print {
            body {
              display: block;
            }
          }
          body {
            transition: none;
          }
        </style>
      </head>
      <body class="${darkClass}">
        ${printArea}
      </body>
    </html>
  `);
        printWindow.document.close();
        printWindow.print();
        printWindow.close();
      }

      document
        .querySelector('[data-collapse-toggle="navbar-cta"]')
        .addEventListener("click", function () {
          const navbar = document.getElementById("navbar-cta");
          navbar.classList.toggle("hidden");
        });
    </script>
  </body>
</html>
